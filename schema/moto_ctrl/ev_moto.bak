EESchema Schematic File Version 2  date Tue 13 Nov 2012 11:09:35 PM MSK
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:74hc164
LIBS:74hc165
LIBS:camozzi
LIBS:con-usb
LIBS:con-usb-2
LIBS:con-usb-3
LIBS:d-sub-37
LIBS:lsm303dlh
LIBS:mc34152
LIBS:my_comps
LIBS:ncp3063
LIBS:sdc
LIBS:stm
LIBS:usb
LIBS:lsm303dlhc
LIBS:stm3485ebdr
LIBS:ad5300
LIBS:moto_ctrl-cache
EELAYER 25  0
EELAYER END
$Descr A2 23400 16535
encoding utf-8
Sheet 2 2
Title ""
Date "13 nov 2012"
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	11150 7300 10500 7300
Wire Wire Line
	12300 7300 11150 7300
Wire Wire Line
	17300 4450 16800 4450
Connection ~ 14800 5400
Connection ~ 14800 4600
Wire Wire Line
	14350 4450 15300 4450
Wire Wire Line
	12750 4250 12400 4250
Wire Wire Line
	12400 4250 12400 2400
Wire Wire Line
	12400 2400 15800 2400
Wire Wire Line
	15800 2400 15800 3750
Connection ~ 15500 3750
Wire Wire Line
	15800 3750 15300 3750
Connection ~ 14600 3750
Wire Wire Line
	14800 3750 14350 3750
Wire Wire Line
	15350 7500 15350 7750
Wire Wire Line
	12300 6900 11650 6900
Connection ~ 14850 8100
Wire Wire Line
	14850 7500 14850 8300
Wire Wire Line
	12300 8100 11650 8100
Wire Wire Line
	14850 6900 13900 6900
Wire Wire Line
	13900 7700 14450 7700
Wire Wire Line
	13900 7300 14450 7300
Wire Wire Line
	14850 8100 13900 8100
Wire Wire Line
	11150 7100 11150 7700
Connection ~ 11150 7300
Wire Wire Line
	14850 7100 14850 6700
Connection ~ 14850 6900
Wire Wire Line
	15350 7100 15350 6850
Wire Wire Line
	11150 6600 11150 6400
Wire Wire Line
	8250 4100 8800 4100
Wire Wire Line
	14550 13450 14950 13450
Wire Wire Line
	14600 11550 15000 11550
Wire Notes Line
	10550 15850 10550 10900
Wire Notes Line
	10550 15850 15300 15850
Wire Notes Line
	15300 15850 15300 10900
Wire Notes Line
	15300 10900 10550 10900
Wire Wire Line
	13950 13650 13950 12950
Wire Wire Line
	13950 12950 13550 12950
Wire Wire Line
	13550 12950 13550 13100
Wire Wire Line
	13450 13850 13650 13850
Wire Wire Line
	14550 14250 14950 14250
Wire Wire Line
	13950 14050 13950 14250
Wire Wire Line
	13950 14250 14050 14250
Wire Wire Line
	12950 13850 12800 13850
Wire Wire Line
	12800 13850 12800 14050
Wire Wire Line
	13550 13850 13550 13600
Connection ~ 13550 13850
Wire Wire Line
	12800 14450 12800 14650
Wire Wire Line
	12100 15150 12100 15550
Wire Wire Line
	12500 14250 11700 14250
Wire Wire Line
	12100 14250 12100 14650
Connection ~ 12100 14250
Wire Wire Line
	11200 14250 10600 14250
Wire Wire Line
	9400 14850 10100 14850
Wire Wire Line
	9400 12650 10100 12650
Wire Wire Line
	11250 12350 10650 12350
Connection ~ 12150 12350
Wire Wire Line
	12150 12350 12150 12750
Wire Wire Line
	12550 12350 11750 12350
Wire Wire Line
	12150 13250 12150 13650
Wire Wire Line
	12850 12550 12850 12750
Connection ~ 13600 11950
Wire Wire Line
	13600 11950 13600 11700
Wire Wire Line
	12850 12150 12850 11950
Wire Wire Line
	12850 11950 13000 11950
Wire Wire Line
	14100 12350 14000 12350
Wire Wire Line
	14000 12350 14000 12150
Wire Wire Line
	8700 13350 8700 13550
Wire Wire Line
	21900 7300 21300 7300
Wire Wire Line
	21900 7200 20800 7200
Wire Wire Line
	19100 2200 19100 2000
Wire Wire Line
	9400 8800 10000 8800
Wire Wire Line
	9400 8400 10000 8400
Wire Wire Line
	21900 6700 20800 6700
Wire Wire Line
	21900 7000 21100 7000
Wire Wire Line
	3800 13700 3600 13700
Wire Wire Line
	4450 13900 4900 13900
Wire Wire Line
	4450 14400 4900 14400
Wire Wire Line
	4300 14600 4900 14600
Wire Wire Line
	5250 14350 5250 14150
Wire Wire Line
	5250 14150 3450 14150
Wire Wire Line
	3450 14350 3600 14350
Wire Wire Line
	3600 14350 3600 14600
Wire Wire Line
	3600 14600 3800 14600
Wire Wire Line
	3450 14250 3800 14250
Wire Wire Line
	3800 14250 3800 14400
Wire Wire Line
	3800 14400 3950 14400
Wire Wire Line
	3450 14050 3800 14050
Wire Wire Line
	3800 14050 3800 13900
Wire Wire Line
	3800 13900 3950 13900
Wire Wire Line
	3450 13950 3600 13950
Wire Wire Line
	3600 13950 3600 13700
Wire Wire Line
	4300 13700 4900 13700
Wire Wire Line
	1300 12700 1700 12700
Wire Wire Line
	10100 11850 9400 11850
Wire Wire Line
	8700 12050 8700 11850
Wire Wire Line
	8000 13150 8000 13550
Wire Wire Line
	8400 12250 7600 12250
Wire Wire Line
	15100 5100 15100 5400
Wire Wire Line
	15100 5400 14500 5400
Wire Wire Line
	14500 5400 14500 5200
Wire Wire Line
	12550 4650 12550 5600
Wire Wire Line
	12200 5500 12200 5650
Wire Wire Line
	11800 3100 11800 3200
Wire Wire Line
	10450 3750 9650 3750
Wire Wire Line
	10450 3350 9650 3350
Wire Wire Line
	11100 2750 11100 2500
Wire Wire Line
	22500 3750 22500 3500
Connection ~ 22000 2500
Wire Wire Line
	22000 2700 22000 2300
Connection ~ 19100 2900
Wire Wire Line
	19100 2700 19100 3300
Wire Wire Line
	22000 3700 21050 3700
Wire Wire Line
	21050 2900 21600 2900
Wire Wire Line
	15300 1750 15300 1550
Wire Wire Line
	15300 1550 15700 1550
Wire Wire Line
	15700 1350 15300 1350
Wire Wire Line
	15300 1350 15300 1150
Wire Wire Line
	20700 1800 21000 1800
Wire Wire Line
	19900 1800 19550 1800
Wire Wire Line
	19350 1600 19350 1500
Wire Wire Line
	19350 1500 19900 1500
Wire Wire Line
	19900 1300 19550 1300
Wire Wire Line
	14800 1250 14800 1150
Wire Wire Line
	14300 1150 14300 1350
Wire Wire Line
	14300 1350 13900 1350
Wire Wire Line
	2100 14700 1300 14700
Wire Wire Line
	2100 14300 1300 14300
Wire Wire Line
	2100 13900 1300 13900
Wire Wire Line
	1300 13500 1700 13500
Wire Wire Line
	1300 12300 1700 12300
Wire Wire Line
	8250 3500 9100 3500
Wire Wire Line
	8250 3200 9100 3200
Wire Wire Line
	8250 4500 9100 4500
Wire Wire Line
	8250 4300 9100 4300
Wire Wire Line
	8250 4700 9100 4700
Wire Wire Line
	2950 8700 2950 8850
Wire Wire Line
	3150 8700 3150 8500
Wire Wire Line
	9500 2350 7550 2350
Wire Wire Line
	9500 2350 9500 2200
Connection ~ 8350 2350
Wire Wire Line
	8350 2500 8350 2200
Wire Wire Line
	7550 2350 7550 2200
Connection ~ 7550 1650
Wire Wire Line
	7950 1650 7950 1800
Connection ~ 5650 1650
Connection ~ 2850 5900
Wire Wire Line
	3000 5900 2650 5900
Wire Wire Line
	8250 8400 8900 8400
Wire Wire Line
	8250 10000 9350 10000
Wire Wire Line
	8250 8600 8900 8600
Wire Wire Line
	8250 5300 9150 5300
Connection ~ 5650 2100
Wire Wire Line
	5650 2100 5650 1500
Connection ~ 2150 5900
Wire Wire Line
	2150 6050 2150 5200
Connection ~ 2850 5200
Wire Wire Line
	2850 5250 2850 5200
Wire Wire Line
	2950 8100 2950 8200
Wire Wire Line
	2600 4550 2600 4400
Wire Wire Line
	2600 4400 2850 4400
Wire Wire Line
	3450 4400 3450 4200
Wire Wire Line
	8250 6500 8950 6500
Wire Wire Line
	4150 2400 4150 2100
Connection ~ 5950 2100
Wire Wire Line
	5950 2400 5950 2100
Connection ~ 5350 11500
Wire Wire Line
	4150 11500 6550 11500
Wire Wire Line
	4150 11500 4150 11300
Connection ~ 5950 11500
Wire Wire Line
	5350 11500 5350 11300
Wire Wire Line
	6550 11500 6550 11300
Wire Wire Line
	5950 11700 5950 11300
Wire Wire Line
	4850 2400 4850 2100
Wire Wire Line
	4850 2100 6550 2100
Wire Wire Line
	6550 2100 6550 2400
Wire Wire Line
	5350 2400 5350 2100
Connection ~ 5350 2100
Wire Wire Line
	8250 6700 8950 6700
Wire Wire Line
	3250 4400 3650 4400
Connection ~ 3450 4400
Wire Wire Line
	3450 3700 3450 3450
Wire Wire Line
	2650 5200 3650 5200
Wire Wire Line
	2850 5900 2850 5850
Wire Wire Line
	2150 5200 2250 5200
Wire Wire Line
	2150 5900 2250 5900
Wire Wire Line
	8250 5500 9150 5500
Wire Wire Line
	8250 8800 8900 8800
Wire Wire Line
	8250 9800 9350 9800
Wire Wire Line
	3150 8500 3650 8500
Wire Wire Line
	3500 5900 3650 5900
Wire Wire Line
	7550 1650 7550 1800
Wire Wire Line
	8350 1650 8350 1800
Connection ~ 7950 1650
Wire Wire Line
	7950 2350 7950 2200
Connection ~ 7950 2350
Wire Wire Line
	9500 1800 9500 1650
Wire Wire Line
	9500 1650 5650 1650
Connection ~ 8350 1650
Wire Wire Line
	3150 9200 3150 9350
Wire Wire Line
	2450 8100 3650 8100
Connection ~ 2950 8100
Wire Wire Line
	8250 3700 9100 3700
Wire Wire Line
	8250 4900 9100 4900
Wire Wire Line
	1300 13100 1700 13100
Wire Wire Line
	13900 1550 14300 1550
Wire Wire Line
	14300 1550 14300 1750
Wire Wire Line
	14800 1650 14800 1750
Wire Wire Line
	20700 1300 21000 1300
Wire Wire Line
	19900 1700 19550 1700
Wire Wire Line
	20700 1400 21000 1400
Wire Wire Line
	20700 1600 21200 1600
Wire Wire Line
	21200 1600 21200 1700
Wire Wire Line
	21050 3300 21600 3300
Wire Wire Line
	22000 2500 21050 2500
Wire Wire Line
	19100 3300 19450 3300
Wire Wire Line
	19100 2900 19450 2900
Wire Wire Line
	19450 3700 18800 3700
Wire Wire Line
	22000 3100 22000 3900
Connection ~ 22000 3700
Wire Wire Line
	19450 4300 18800 4300
Wire Wire Line
	19450 4700 19100 4700
Wire Wire Line
	19100 5100 19450 5100
Connection ~ 22000 5500
Wire Wire Line
	22000 4900 22000 5700
Wire Wire Line
	22000 4300 21050 4300
Wire Wire Line
	21050 5100 21600 5100
Wire Wire Line
	21050 4700 21600 4700
Wire Wire Line
	22000 5500 21050 5500
Wire Wire Line
	22000 4500 22000 4100
Connection ~ 22000 4300
Wire Wire Line
	19100 4700 19100 5300
Connection ~ 19100 5100
Wire Wire Line
	22500 4150 22500 4400
Wire Wire Line
	17350 14150 17350 13900
Connection ~ 21650 12550
Wire Wire Line
	21650 12550 21650 13400
Connection ~ 17350 12650
Wire Wire Line
	16750 12250 16750 12650
Wire Wire Line
	16750 12650 18450 12650
Wire Wire Line
	18200 13550 18200 12750
Wire Wire Line
	18200 12750 18450 12750
Connection ~ 21300 12550
Wire Wire Line
	21300 12850 21300 12550
Connection ~ 21000 12550
Wire Wire Line
	21000 12850 21000 12550
Connection ~ 20300 12550
Wire Wire Line
	20300 12850 20300 12550
Wire Wire Line
	19600 12550 20350 12550
Wire Wire Line
	19700 12900 19700 12750
Wire Wire Line
	19700 12750 19600 12750
Connection ~ 18150 11650
Wire Wire Line
	18150 11650 18150 12550
Wire Wire Line
	18150 12550 18450 12550
Connection ~ 17550 11850
Wire Wire Line
	17550 11950 17550 11850
Connection ~ 17550 12550
Wire Wire Line
	17550 12450 17550 12550
Wire Wire Line
	17350 12650 17350 12850
Wire Wire Line
	17350 12450 17350 12550
Wire Wire Line
	17350 12550 17750 12550
Wire Wire Line
	17350 11950 17350 11850
Wire Wire Line
	17350 11850 17750 11850
Wire Wire Line
	17750 11950 17750 11650
Wire Wire Line
	17750 11650 19850 11650
Wire Wire Line
	19850 11650 19850 12450
Wire Wire Line
	19850 12450 19600 12450
Connection ~ 17750 11850
Wire Wire Line
	19950 12850 19950 12650
Wire Wire Line
	19950 12650 19600 12650
Wire Wire Line
	19950 13250 19950 13400
Wire Wire Line
	20300 13250 20300 13400
Wire Wire Line
	21000 13250 21000 13400
Wire Wire Line
	21300 13250 21300 13400
Wire Wire Line
	18200 14050 18200 14300
Wire Wire Line
	17350 14550 17350 14950
Wire Wire Line
	18300 13450 18200 13450
Connection ~ 18200 13450
Wire Wire Line
	19350 13450 18800 13450
Wire Wire Line
	22250 12350 22250 12550
Wire Wire Line
	22250 12550 20950 12550
Wire Wire Line
	17350 13500 17350 13250
Wire Wire Line
	17750 12650 17750 12450
Connection ~ 17750 12650
Connection ~ 17750 12550
Wire Wire Line
	12750 3550 11750 3550
Wire Wire Line
	13550 3050 13550 2800
Wire Wire Line
	11100 4350 11100 4700
Wire Wire Line
	10450 3550 9650 3550
Wire Wire Line
	11100 2600 11800 2600
Connection ~ 11100 2600
Wire Wire Line
	11800 2600 11800 2700
Wire Wire Line
	12200 5000 12200 4650
Wire Wire Line
	13550 5150 13550 5350
Wire Wire Line
	16300 4450 15800 4450
Wire Wire Line
	8000 12250 8000 12650
Connection ~ 8000 12250
Wire Wire Line
	7100 12250 6500 12250
Wire Wire Line
	8700 14500 8700 15100
Wire Wire Line
	7100 14300 6500 14300
Connection ~ 8000 14300
Wire Wire Line
	8000 14300 8000 14700
Wire Wire Line
	8400 14300 7600 14300
Wire Wire Line
	8000 15200 8000 15600
Wire Wire Line
	8700 14100 8700 13900
Wire Wire Line
	10100 13900 9400 13900
Wire Wire Line
	8700 11850 8900 11850
Wire Wire Line
	8700 13900 8900 13900
Wire Wire Line
	21900 6900 21300 6900
Wire Wire Line
	21900 7100 21300 7100
Wire Wire Line
	21100 6600 21900 6600
Wire Wire Line
	20800 6700 20800 6900
Wire Wire Line
	1650 10950 1650 11150
Wire Wire Line
	1650 10550 1650 10350
Wire Wire Line
	1250 10550 1250 10350
Wire Wire Line
	1250 10950 1250 11150
Wire Wire Line
	1250 9850 1250 9600
Wire Wire Line
	1650 9850 1650 9600
Wire Wire Line
	4350 13050 3450 13050
Wire Wire Line
	3650 12750 3650 12850
Wire Wire Line
	3650 12850 3450 12850
Wire Wire Line
	9400 8600 10000 8600
Wire Wire Line
	19100 5800 19100 6000
Wire Wire Line
	21900 6800 21100 6800
Wire Wire Line
	20800 7200 20800 7400
Wire Wire Line
	21900 7400 21100 7400
Wire Wire Line
	8700 12850 8700 12450
Wire Wire Line
	8700 15600 8700 15800
Wire Wire Line
	14600 12350 15000 12350
Wire Wire Line
	13500 11950 13700 11950
Wire Wire Line
	13600 11200 13600 11050
Wire Wire Line
	13600 11050 14000 11050
Wire Wire Line
	14000 11050 14000 11750
Wire Wire Line
	8700 12650 8900 12650
Connection ~ 8700 12650
Wire Wire Line
	8900 14850 8700 14850
Connection ~ 8700 14850
Wire Notes Line
	10400 11600 6400 11600
Wire Notes Line
	10400 11600 10400 15950
Wire Notes Line
	10400 15950 6400 15950
Wire Notes Line
	6400 15950 6400 11600
Wire Wire Line
	14100 11550 14000 11550
Connection ~ 14000 11550
Wire Wire Line
	14050 13450 13950 13450
Connection ~ 13950 13450
Wire Wire Line
	8250 3900 8800 3900
Wire Wire Line
	14600 3750 14600 2600
Wire Wire Line
	14600 2600 12600 2600
Wire Wire Line
	12600 2600 12600 3950
Wire Wire Line
	12600 3950 12750 3950
Wire Wire Line
	15500 3750 15500 3900
Wire Wire Line
	15500 4300 15500 4500
Wire Wire Line
	12200 4650 12750 4650
Connection ~ 12550 4650
Wire Wire Line
	15100 4700 15100 4600
Wire Wire Line
	15100 4600 14500 4600
Wire Wire Line
	14500 4600 14500 4700
Wire Wire Line
	14800 4450 14800 4700
Connection ~ 14800 4450
Wire Wire Line
	14800 5200 14800 5600
Wire Wire Line
	14800 5600 12550 5600
Wire Wire Line
	8250 5100 8800 5100
Wire Wire Line
	11150 7700 12300 7700
Text Label 10550 7300 0    60   ~ 0
bmsd-dir
Text Label 8400 5100 0    60   ~ 0
bmsd-dir
Text Notes 6550 13150 0    60   ~ 0
This part if \nnegative pads \nare grounded.\n\nRs on ends are just \nfor avoiding DRC errors.
Text Notes 15900 3900 0    60   ~ 0
Second stage: 16*(9+w^2*R^2*C^2)=25*(4+w^2*R^2*C^2)\nw = 1005 (1/s)\nf = 160Hz
Text Notes 15900 3550 0    60   ~ 0
First stage: w = 1/(10e4 * 220e-9) = 455 (1/s)\nf = 72Hz
Text Notes 15900 3250 0    60   ~ 0
H(s) = 1/(1 + s*R65*C33) * (3 + s*R*C36)/(2 + s*R*C36)
Text Notes 19500 4050 0    60   ~ 0
Absolute encoder RS-485 readout.
Text Notes 15900 2500 0    60   ~ 0
Two stages amplifier.\nFirst is buffer with infinite input \nR because DAC can't give big \ncurrent. After that RC low pass.\nAnd last stage is x1.5 at 0Hz and \nx1 at (inf) Hz amplifier with cutoff \nat about 500Hz.
$Comp
L GND #PWR096
U 1 1 50A29052
P 15500 4500
F 0 "#PWR096" H 15500 4500 30  0001 C CNN
F 1 "GND" H 15500 4430 30  0001 C CNN
	1    15500 4500
	1    0    0    -1  
$EndComp
$Comp
L C C33
U 1 1 50A2902E
P 15500 4100
F 0 "C33" H 15550 4200 50  0000 L CNN
F 1 "220n" H 15550 4000 50  0000 L CNN
	1    15500 4100
	1    0    0    -1  
$EndComp
$Comp
L R R65
U 1 1 50A29023
P 15050 3750
F 0 "R65" V 15130 3750 50  0000 C CNN
F 1 "10k" V 15050 3750 50  0000 C CNN
	1    15050 3750
	0    -1   -1   0   
$EndComp
Text Notes 15700 7300 0    60   ~ 0
This is RS-485 BMSD control part.
Text Label 11700 6900 0    60   ~ 0
bmsd-rx
Text Label 11700 8100 0    60   ~ 0
bmsd-tx
$Comp
L STM3485EBDR rs3
U 1 1 50A28F59
P 13100 7500
F 0 "rs3" H 13100 7350 60  0000 C CNN
F 1 "STM3485EBDR" H 13100 7650 60  0000 C CNN
	1    13100 7500
	1    0    0    -1  
$EndComp
Text Label 14100 7700 0    60   ~ 0
rs-a
Text Label 14100 7300 0    60   ~ 0
rs-b
$Comp
L VDD #PWR097
U 1 1 50A28F57
P 14850 6700
F 0 "#PWR097" H 14850 6800 30  0001 C CNN
F 1 "VDD" H 14850 6810 30  0000 C CNN
	1    14850 6700
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR098
U 1 1 50A28F56
P 14850 8300
F 0 "#PWR098" H 14850 8300 30  0001 C CNN
F 1 "GND" H 14850 8230 30  0001 C CNN
	1    14850 8300
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR099
U 1 1 50A28F55
P 11150 6400
F 0 "#PWR099" H 11150 6500 30  0001 C CNN
F 1 "VDD" H 11150 6510 30  0000 C CNN
	1    11150 6400
	1    0    0    -1  
$EndComp
$Comp
L C C39
U 1 1 50A28F54
P 14850 7300
F 0 "C39" H 14900 7400 50  0000 L CNN
F 1 "100n" H 14900 7200 50  0000 L CNN
	1    14850 7300
	1    0    0    -1  
$EndComp
$Comp
L C C40
U 1 1 50A28F4F
P 15350 7300
F 0 "C40" H 15400 7400 50  0000 L CNN
F 1 "10u" H 15400 7200 50  0000 L CNN
	1    15350 7300
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR0103
U 1 1 50A28F4E
P 15350 6850
F 0 "#PWR0103" H 15350 6950 30  0001 C CNN
F 1 "VDD" H 15350 6960 30  0000 C CNN
	1    15350 6850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0104
U 1 1 50A28F4D
P 15350 7750
F 0 "#PWR0104" H 15350 7750 30  0001 C CNN
F 1 "GND" H 15350 7680 30  0001 C CNN
	1    15350 7750
	1    0    0    -1  
$EndComp
$Comp
L R R73
U 1 1 50A28F4B
P 11150 6850
F 0 "R73" V 11230 6850 50  0000 C CNN
F 1 "10k" V 11150 6850 50  0000 C CNN
	1    11150 6850
	1    0    0    -1  
$EndComp
Text Label 8400 4100 0    60   ~ 0
bmsd-rx
Text Label 8400 3900 0    60   ~ 0
bmsd-tx
$Comp
L R R97
U 1 1 50A28E24
P 14300 13450
F 0 "R97" V 14380 13450 50  0000 C CNN
F 1 "100" V 14300 13450 50  0000 C CNN
	1    14300 13450
	0    -1   -1   0   
$EndComp
$Comp
L R R83
U 1 1 50A28E02
P 14350 11550
F 0 "R83" V 14430 11550 50  0000 C CNN
F 1 "100" V 14350 11550 50  0000 C CNN
	1    14350 11550
	0    -1   -1   0   
$EndComp
Text Notes 10800 13250 0    60   ~ 0
This part if \npositive pads \nare +5V powered.\n\nRs on ends are just \nfor avoiding DRC errors.
$Comp
L MOSFET_P Q4
U 1 1 50A28D4E
P 13850 13850
F 0 "Q4" H 13850 14040 60  0000 R CNN
F 1 "MOSFET_P" H 13850 13670 60  0000 R CNN
	1    13850 13850
	1    0    0    1   
$EndComp
$Comp
L R R105
U 1 1 50A28D4D
P 14300 14250
F 0 "R105" V 14380 14250 50  0000 C CNN
F 1 "100" V 14300 14250 50  0000 C CNN
	1    14300 14250
	0    -1   -1   0   
$EndComp
$Comp
L R R101
U 1 1 50A28D4C
P 13200 13850
F 0 "R101" V 13280 13850 50  0000 C CNN
F 1 "1k" V 13200 13850 50  0000 C CNN
	1    13200 13850
	0    -1   -1   0   
$EndComp
$Comp
L NPN Q5
U 1 1 50A28D4B
P 12700 14250
F 0 "Q5" H 12700 14100 50  0000 R CNN
F 1 "NPN" H 12700 14400 50  0000 R CNN
	1    12700 14250
	1    0    0    -1  
$EndComp
$Comp
L R R96
U 1 1 50A28D4A
P 13550 13350
F 0 "R96" V 13630 13350 50  0000 C CNN
F 1 "10k" V 13550 13350 50  0000 C CNN
	1    13550 13350
	-1   0    0    1   
$EndComp
Text Label 14750 13450 0    60   ~ 0
en+
Text Label 14750 14250 0    60   ~ 0
en-
$Comp
L GND #PWR0105
U 1 1 50A28D49
P 12800 14650
F 0 "#PWR0105" H 12800 14650 30  0001 C CNN
F 1 "GND" H 12800 14580 30  0001 C CNN
	1    12800 14650
	1    0    0    -1  
$EndComp
Text Label 10650 14250 0    60   ~ 0
en-input
$Comp
L GND #PWR0106
U 1 1 50A28D48
P 12100 15550
F 0 "#PWR0106" H 12100 15550 30  0001 C CNN
F 1 "GND" H 12100 15480 30  0001 C CNN
	1    12100 15550
	1    0    0    -1  
$EndComp
$Comp
L R R110
U 1 1 50A28D47
P 12100 14900
F 0 "R110" V 12180 14900 50  0000 C CNN
F 1 "10k" V 12100 14900 50  0000 C CNN
	1    12100 14900
	-1   0    0    1   
$EndComp
$Comp
L R R104
U 1 1 50A28D46
P 11450 14250
F 0 "R104" V 11530 14250 50  0000 C CNN
F 1 "1k" V 11450 14250 50  0000 C CNN
	1    11450 14250
	0    -1   -1   0   
$EndComp
$Comp
L R R109
U 1 1 50A28D0B
P 9150 14850
F 0 "R109" V 9230 14850 50  0000 C CNN
F 1 "100" V 9150 14850 50  0000 C CNN
	1    9150 14850
	0    -1   -1   0   
$EndComp
Text Label 9850 12650 0    60   ~ 0
dir-
$Comp
L R R92
U 1 1 50A28CF3
P 9150 12650
F 0 "R92" V 9230 12650 50  0000 C CNN
F 1 "100" V 9150 12650 50  0000 C CNN
	1    9150 12650
	0    -1   -1   0   
$EndComp
$Comp
L R R90
U 1 1 50A28CBE
P 11500 12350
F 0 "R90" V 11580 12350 50  0000 C CNN
F 1 "1k" V 11500 12350 50  0000 C CNN
	1    11500 12350
	0    -1   -1   0   
$EndComp
$Comp
L R R94
U 1 1 50A28CBD
P 12150 13000
F 0 "R94" V 12230 13000 50  0000 C CNN
F 1 "10k" V 12150 13000 50  0000 C CNN
	1    12150 13000
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR0107
U 1 1 50A28CBC
P 12150 13650
F 0 "#PWR0107" H 12150 13650 30  0001 C CNN
F 1 "GND" H 12150 13580 30  0001 C CNN
	1    12150 13650
	1    0    0    -1  
$EndComp
Text Label 10700 12350 0    60   ~ 0
dir-input
$Comp
L GND #PWR0108
U 1 1 50A28CAD
P 12850 12750
F 0 "#PWR0108" H 12850 12750 30  0001 C CNN
F 1 "GND" H 12850 12680 30  0001 C CNN
	1    12850 12750
	1    0    0    -1  
$EndComp
Text Label 14800 12350 0    60   ~ 0
dir-
Text Label 14800 11550 0    60   ~ 0
dir+
$Comp
L R R82
U 1 1 50A28C6B
P 13600 11450
F 0 "R82" V 13680 11450 50  0000 C CNN
F 1 "10k" V 13600 11450 50  0000 C CNN
	1    13600 11450
	-1   0    0    1   
$EndComp
$Comp
L NPN Q3
U 1 1 50A28C55
P 12750 12350
F 0 "Q3" H 12750 12200 50  0000 R CNN
F 1 "NPN" H 12750 12500 50  0000 R CNN
	1    12750 12350
	1    0    0    -1  
$EndComp
$Comp
L R R85
U 1 1 50A28C4D
P 13250 11950
F 0 "R85" V 13330 11950 50  0000 C CNN
F 1 "1k" V 13250 11950 50  0000 C CNN
	1    13250 11950
	0    -1   -1   0   
$EndComp
$Comp
L R R91
U 1 1 50A28C29
P 14350 12350
F 0 "R91" V 14430 12350 50  0000 C CNN
F 1 "100" V 14350 12350 50  0000 C CNN
	1    14350 12350
	0    -1   -1   0   
$EndComp
$Comp
L MOSFET_P Q1
U 1 1 50A28BF6
P 13900 11950
F 0 "Q1" H 13900 12140 60  0000 R CNN
F 1 "MOSFET_P" H 13900 11770 60  0000 R CNN
	1    13900 11950
	1    0    0    1   
$EndComp
$Comp
L R R112
U 1 1 50A28BE5
P 8700 15350
F 0 "R112" V 8780 15350 50  0000 C CNN
F 1 "1k" V 8700 15350 50  0000 C CNN
	1    8700 15350
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR0109
U 1 1 50A28BE4
P 8700 15800
F 0 "#PWR0109" H 8700 15800 30  0001 C CNN
F 1 "GND" H 8700 15730 30  0001 C CNN
	1    8700 15800
	1    0    0    -1  
$EndComp
$Comp
L MOSFET_N Q6
U 1 1 50A28BD6
P 8600 14300
F 0 "Q6" H 8610 14470 60  0000 R CNN
F 1 "MOSFET_N" H 8610 14150 60  0000 R CNN
	1    8600 14300
	1    0    0    -1  
$EndComp
$Comp
L MOSFET_N Q2
U 1 1 50A28B82
P 8600 12250
F 0 "Q2" H 8610 12420 60  0000 R CNN
F 1 "MOSFET_N" H 8610 12100 60  0000 R CNN
	1    8600 12250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0110
U 1 1 50A28A85
P 8700 13550
F 0 "#PWR0110" H 8700 13550 30  0001 C CNN
F 1 "GND" H 8700 13480 30  0001 C CNN
	1    8700 13550
	1    0    0    -1  
$EndComp
$Comp
L R R95
U 1 1 50A28A70
P 8700 13100
F 0 "R95" V 8780 13100 50  0000 C CNN
F 1 "1k" V 8700 13100 50  0000 C CNN
	1    8700 13100
	-1   0    0    1   
$EndComp
Text Label 21350 7400 0    60   ~ 0
rs-b
Text Label 21350 7300 0    60   ~ 0
rs-a
$Comp
L GND #PWR0111
U 1 1 50A28A03
P 20800 7400
F 0 "#PWR0111" H 20800 7400 30  0001 C CNN
F 1 "GND" H 20800 7330 30  0001 C CNN
	1    20800 7400
	1    0    0    -1  
$EndComp
Text Notes 21650 6350 0    60   ~ 0
BMSD control
$Comp
L R R64
U 1 1 50A2890D
P 19100 2450
F 0 "R64" V 19180 2450 50  0000 C CNN
F 1 "10k" V 19100 2450 50  0000 C CNN
	1    19100 2450
	1    0    0    -1  
$EndComp
$Comp
L R R71
U 1 1 50A288F7
P 19100 5550
F 0 "R71" V 19180 5550 50  0000 C CNN
F 1 "10k" V 19100 5550 50  0000 C CNN
	1    19100 5550
	1    0    0    -1  
$EndComp
NoConn ~ 8250 5900
NoConn ~ 8250 5700
$Comp
L R R77
U 1 1 509E4B86
P 9150 8800
F 0 "R77" V 9230 8800 50  0000 C CNN
F 1 "50" V 9150 8800 50  0000 C CNN
	1    9150 8800
	0    -1   -1   0   
$EndComp
$Comp
L R R76
U 1 1 509E4B84
P 9150 8600
F 0 "R76" V 9230 8600 50  0000 C CNN
F 1 "50" V 9150 8600 50  0000 C CNN
	1    9150 8600
	0    -1   -1   0   
$EndComp
$Comp
L R R74
U 1 1 509E4B7C
P 9150 8400
F 0 "R74" V 9230 8400 50  0000 C CNN
F 1 "50" V 9150 8400 50  0000 C CNN
	1    9150 8400
	0    -1   -1   0   
$EndComp
Text Label 3750 13050 0    60   ~ 0
fw-upgrade
$Comp
L VDD #PWR0112
U 1 1 509E498D
P 3650 12750
F 0 "#PWR0112" H 3650 12850 30  0001 C CNN
F 1 "VDD" H 3650 12860 30  0000 C CNN
	1    3650 12750
	1    0    0    -1  
$EndComp
$Comp
L CONN_2 P8
U 1 1 509E498C
P 3100 12950
F 0 "P8" V 3050 12950 40  0000 C CNN
F 1 "CONN_2" V 3150 12950 40  0000 C CNN
	1    3100 12950
	-1   0    0    -1  
$EndComp
NoConn ~ 8250 10400
NoConn ~ 8250 10200
NoConn ~ 8250 9600
NoConn ~ 8250 9400
NoConn ~ 8250 9200
NoConn ~ 8250 9000
NoConn ~ 8250 7850
NoConn ~ 8250 8050
NoConn ~ 3650 7500
NoConn ~ 3650 6800
$Comp
L LED D5
U 1 1 509E48D6
P 1250 10750
F 0 "D5" H 1250 10850 50  0000 C CNN
F 1 "LED" H 1250 10650 50  0000 C CNN
	1    1250 10750
	0    1    1    0   
$EndComp
$Comp
L R R80
U 1 1 509E48D5
P 1250 10100
F 0 "R80" V 1330 10100 50  0000 C CNN
F 1 "500" V 1250 10100 50  0000 C CNN
	1    1250 10100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0113
U 1 1 509E48D4
P 1250 11150
F 0 "#PWR0113" H 1250 11150 30  0001 C CNN
F 1 "GND" H 1250 11080 30  0001 C CNN
	1    1250 11150
	1    0    0    -1  
$EndComp
Text Label 1250 9800 1    60   ~ 0
led1
Text Label 1650 9800 1    60   ~ 0
led2
$Comp
L GND #PWR0114
U 1 1 509E48D3
P 1650 11150
F 0 "#PWR0114" H 1650 11150 30  0001 C CNN
F 1 "GND" H 1650 11080 30  0001 C CNN
	1    1650 11150
	1    0    0    -1  
$EndComp
$Comp
L R R81
U 1 1 509E48D2
P 1650 10100
F 0 "R81" V 1730 10100 50  0000 C CNN
F 1 "500" V 1650 10100 50  0000 C CNN
	1    1650 10100
	1    0    0    -1  
$EndComp
$Comp
L LED D6
U 1 1 509E48D1
P 1650 10750
F 0 "D6" H 1650 10850 50  0000 C CNN
F 1 "LED" H 1650 10650 50  0000 C CNN
	1    1650 10750
	0    1    1    0   
$EndComp
$Comp
L GND #PWR0115
U 1 1 509E489B
P 20800 6900
F 0 "#PWR0115" H 20800 6900 30  0001 C CNN
F 1 "GND" H 20800 6830 30  0001 C CNN
	1    20800 6900
	1    0    0    -1  
$EndComp
Text Label 21350 7100 0    60   ~ 0
en-
Text Label 21350 7000 0    60   ~ 0
en+
Text Label 21350 6900 0    60   ~ 0
dir-
Text Label 21350 6800 0    60   ~ 0
dir+
Text Label 21350 6600 0    60   ~ 0
dac-out
$Comp
L DB9 J3
U 1 1 509E4824
P 22350 7000
F 0 "J3" H 22350 7550 70  0000 C CNN
F 1 "DB9" H 22350 6450 70  0000 C CNN
	1    22350 7000
	1    0    0    1   
$EndComp
$Comp
L R R103
U 1 1 509E46BE
P 9150 13900
F 0 "R103" V 9230 13900 50  0000 C CNN
F 1 "100" V 9150 13900 50  0000 C CNN
	1    9150 13900
	0    -1   -1   0   
$EndComp
$Comp
L R R84
U 1 1 509E4667
P 9150 11850
F 0 "R84" V 9230 11850 50  0000 C CNN
F 1 "100" V 9150 11850 50  0000 C CNN
	1    9150 11850
	0    -1   -1   0   
$EndComp
Text Label 4800 13700 0    60   ~ 0
tx
$Comp
L R R99
U 1 1 509E4640
P 4050 13700
F 0 "R99" V 4130 13700 50  0000 C CNN
F 1 "50" V 4050 13700 50  0000 C CNN
	1    4050 13700
	0    -1   -1   0   
$EndComp
Text Label 4800 13900 0    60   ~ 0
rx
$Comp
L GND #PWR0116
U 1 1 509E463F
P 5250 14350
F 0 "#PWR0116" H 5250 14350 30  0001 C CNN
F 1 "GND" H 5250 14280 30  0001 C CNN
	1    5250 14350
	1    0    0    -1  
$EndComp
$Comp
L CONN_5 P9
U 1 1 509E463E
P 3050 14150
F 0 "P9" V 3000 14150 50  0000 C CNN
F 1 "SWD-IAP" V 3100 14150 50  0000 C CNN
	1    3050 14150
	-1   0    0    -1  
$EndComp
$Comp
L R R102
U 1 1 509E463D
P 4200 13900
F 0 "R102" V 4280 13900 50  0000 C CNN
F 1 "50" V 4200 13900 50  0000 C CNN
	1    4200 13900
	0    -1   -1   0   
$EndComp
Text Label 4550 14600 0    60   ~ 0
swd-clk
Text Label 4550 14400 0    60   ~ 0
swd-io
$Comp
L R R108
U 1 1 509E463C
P 4050 14600
F 0 "R108" V 4130 14600 50  0000 C CNN
F 1 "50" V 4050 14600 50  0000 C CNN
	1    4050 14600
	0    -1   -1   0   
$EndComp
$Comp
L R R107
U 1 1 509E463B
P 4200 14400
F 0 "R107" V 4280 14400 50  0000 C CNN
F 1 "50" V 4200 14400 50  0000 C CNN
	1    4200 14400
	0    -1   -1   0   
$EndComp
Text HLabel 1300 12700 0    60   Input ~ 0
+5v
$Comp
L +5V #PWR0117
U 1 1 509E45E4
P 1700 12700
F 0 "#PWR0117" H 1700 12790 20  0001 C CNN
F 1 "+5V" H 1700 12790 30  0000 C CNN
	1    1700 12700
	0    1    1    0   
$EndComp
Text Label 8700 4700 0    60   ~ 0
enc-clock
Text Label 8700 4900 0    60   ~ 0
enc-data
Text Label 8600 3200 0    60   ~ 0
~dac-synch~
Text Label 9050 5300 0    60   ~ 0
tx
Text Label 9050 5500 0    60   ~ 0
rx
$Comp
L R R106
U 1 1 509E4495
P 7350 14300
F 0 "R106" V 7430 14300 50  0000 C CNN
F 1 "1k" V 7350 14300 50  0000 C CNN
	1    7350 14300
	0    -1   -1   0   
$EndComp
$Comp
L R R111
U 1 1 509E4494
P 8000 14950
F 0 "R111" V 8080 14950 50  0000 C CNN
F 1 "10k" V 8000 14950 50  0000 C CNN
	1    8000 14950
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR0118
U 1 1 509E4493
P 8000 15600
F 0 "#PWR0118" H 8000 15600 30  0001 C CNN
F 1 "GND" H 8000 15530 30  0001 C CNN
	1    8000 15600
	1    0    0    -1  
$EndComp
Text Label 6550 14300 0    60   ~ 0
en-input
Text Label 9850 13900 0    60   ~ 0
en+
Text Label 9850 14850 0    60   ~ 0
en-
Text Label 9850 11850 0    60   ~ 0
dir+
Text Label 6550 12250 0    60   ~ 0
dir-input
$Comp
L GND #PWR0119
U 1 1 509E4451
P 8000 13550
F 0 "#PWR0119" H 8000 13550 30  0001 C CNN
F 1 "GND" H 8000 13480 30  0001 C CNN
	1    8000 13550
	1    0    0    -1  
$EndComp
$Comp
L R R93
U 1 1 509E4441
P 8000 12900
F 0 "R93" V 8080 12900 50  0000 C CNN
F 1 "10k" V 8000 12900 50  0000 C CNN
	1    8000 12900
	-1   0    0    1   
$EndComp
$Comp
L R R89
U 1 1 509E4411
P 7350 12250
F 0 "R89" V 7430 12250 50  0000 C CNN
F 1 "1k" V 7350 12250 50  0000 C CNN
	1    7350 12250
	0    -1   -1   0   
$EndComp
Text Label 16950 4450 0    60   ~ 0
dac-out
Text Label 15850 4450 0    60   ~ 0
out-gain
$Comp
L R R67
U 1 1 509E4337
P 16550 4450
F 0 "R67" V 16630 4450 50  0000 C CNN
F 1 "10k" V 16550 4450 50  0000 C CNN
	1    16550 4450
	0    -1   -1   0   
$EndComp
$Comp
L R R69
U 1 1 509E3D82
P 14800 4950
F 0 "R69" V 14880 4950 50  0000 C CNN
F 1 "10k" V 14800 4950 50  0000 C CNN
	1    14800 4950
	1    0    0    -1  
$EndComp
Text Label 14900 4450 0    60   ~ 0
out-gain
$Comp
L C C36
U 1 1 509E3C81
P 15100 4900
F 0 "C36" H 15150 5000 50  0000 L CNN
F 1 "220n" H 15150 4800 50  0000 L CNN
	1    15100 4900
	1    0    0    -1  
$EndComp
$Comp
L R R68
U 1 1 509E3C77
P 14500 4950
F 0 "R68" V 14580 4950 50  0000 C CNN
F 1 "10k" V 14500 4950 50  0000 C CNN
	1    14500 4950
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0120
U 1 1 509E3C18
P 13550 5350
F 0 "#PWR0120" H 13550 5350 30  0001 C CNN
F 1 "GND" H 13550 5280 30  0001 C CNN
	1    13550 5350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0121
U 1 1 509E3C10
P 12200 5650
F 0 "#PWR0121" H 12200 5650 30  0001 C CNN
F 1 "GND" H 12200 5580 30  0001 C CNN
	1    12200 5650
	1    0    0    -1  
$EndComp
$Comp
L R R70
U 1 1 509E3C08
P 12200 5250
F 0 "R70" V 12280 5250 50  0000 C CNN
F 1 "10k" V 12200 5250 50  0000 C CNN
	1    12200 5250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0122
U 1 1 509E3BEC
P 11800 3200
F 0 "#PWR0122" H 11800 3200 30  0001 C CNN
F 1 "GND" H 11800 3130 30  0001 C CNN
	1    11800 3200
	1    0    0    -1  
$EndComp
$Comp
L C C30
U 1 1 509E3BE6
P 11800 2900
F 0 "C30" H 11850 3000 50  0000 L CNN
F 1 "C" H 11850 2800 50  0000 L CNN
	1    11800 2900
	1    0    0    -1  
$EndComp
Text Label 9700 3750 0    60   ~ 0
dac-din
Text Label 9700 3550 0    60   ~ 0
dac-sclk
Text Label 9700 3350 0    60   ~ 0
~dac-synch~
$Comp
L GND #PWR0123
U 1 1 509E3BA3
P 11100 4700
F 0 "#PWR0123" H 11100 4700 30  0001 C CNN
F 1 "GND" H 11100 4630 30  0001 C CNN
	1    11100 4700
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR0124
U 1 1 509E3B9D
P 11100 2500
F 0 "#PWR0124" H 11100 2600 30  0001 C CNN
F 1 "VDD" H 11100 2610 30  0000 C CNN
	1    11100 2500
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR0125
U 1 1 509E3B80
P 13550 2800
F 0 "#PWR0125" H 13550 2890 20  0001 C CNN
F 1 "+5V" H 13550 2890 30  0000 C CNN
	1    13550 2800
	1    0    0    -1  
$EndComp
$Comp
L AD8607 D4
U 1 1 509E3B67
P 13550 4100
F 0 "D4" H 13550 3750 60  0000 C CNN
F 1 "AD8607" H 13550 4100 60  0000 C CNN
	1    13550 4100
	1    0    0    -1  
$EndComp
$Comp
L AD5300 adc1
U 1 1 509E3AD6
P 11100 3550
F 0 "adc1" H 11050 3450 60  0000 C CNN
F 1 "AD5300" H 11100 3650 60  0000 C CNN
	1    11100 3550
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0126
U 1 1 509E37B4
P 18200 14300
F 0 "#PWR0126" H 18200 14300 30  0001 C CNN
F 1 "GND" H 18200 14230 30  0001 C CNN
	1    18200 14300
	1    0    0    -1  
$EndComp
Text Label 21650 13350 1    60   ~ 0
5v-out
Text Label 18950 13450 0    60   ~ 0
5v-out
$Comp
L R R98
U 1 1 509E37B3
P 18550 13450
F 0 "R98" V 18630 13450 50  0000 C CNN
F 1 "30k" V 18550 13450 50  0000 C CNN
	1    18550 13450
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR0127
U 1 1 509E37B2
P 17350 14950
F 0 "#PWR0127" H 17350 14950 30  0001 C CNN
F 1 "GND" H 17350 14880 30  0001 C CNN
	1    17350 14950
	1    0    0    -1  
$EndComp
$Comp
L R R100
U 1 1 509E37B1
P 18200 13800
F 0 "R100" V 18280 13800 50  0000 C CNN
F 1 "10k" V 18200 13800 50  0000 C CNN
	1    18200 13800
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0128
U 1 1 509E37B0
P 21300 13400
F 0 "#PWR0128" H 21300 13400 30  0001 C CNN
F 1 "GND" H 21300 13330 30  0001 C CNN
	1    21300 13400
	1    0    0    -1  
$EndComp
$Comp
L C C45
U 1 1 509E37AF
P 21300 13050
F 0 "C45" H 21350 13150 50  0000 L CNN
F 1 "1m" H 21350 12950 50  0000 L CNN
	1    21300 13050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0129
U 1 1 509E37AE
P 21000 13400
F 0 "#PWR0129" H 21000 13400 30  0001 C CNN
F 1 "GND" H 21000 13330 30  0001 C CNN
	1    21000 13400
	1    0    0    -1  
$EndComp
$Comp
L C C44
U 1 1 509E37AD
P 21000 13050
F 0 "C44" H 21050 13150 50  0000 L CNN
F 1 "100n" H 21050 12950 50  0000 L CNN
	1    21000 13050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0130
U 1 1 509E37AC
P 20300 13400
F 0 "#PWR0130" H 20300 13400 30  0001 C CNN
F 1 "GND" H 20300 13330 30  0001 C CNN
	1    20300 13400
	1    0    0    -1  
$EndComp
$Comp
L DIODESCH D7
U 1 1 509E37AB
P 20300 13050
F 0 "D7" H 20300 13150 40  0000 C CNN
F 1 "1N5819" H 20300 12950 40  0000 C CNN
	1    20300 13050
	0    -1   -1   0   
$EndComp
$Comp
L INDUCTOR L2
U 1 1 509E37AA
P 20650 12550
F 0 "L2" V 20600 12550 40  0000 C CNN
F 1 "INDUCTOR" V 20750 12550 40  0000 C CNN
	1    20650 12550
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR0131
U 1 1 509E37A9
P 19950 13400
F 0 "#PWR0131" H 19950 13400 30  0001 C CNN
F 1 "GND" H 19950 13330 30  0001 C CNN
	1    19950 13400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0132
U 1 1 509E37A8
P 19700 12900
F 0 "#PWR0132" H 19700 12900 30  0001 C CNN
F 1 "GND" H 19700 12830 30  0001 C CNN
	1    19700 12900
	1    0    0    -1  
$EndComp
$Comp
L C C43
U 1 1 509E37A7
P 19950 13050
F 0 "C43" H 20000 13150 50  0000 L CNN
F 1 "2.2n" H 20000 12950 50  0000 L CNN
	1    19950 13050
	1    0    0    -1  
$EndComp
$Comp
L R R86
U 1 1 509E37A6
P 17350 12200
F 0 "R86" V 17430 12200 50  0000 C CNN
F 1 "1R5" V 17350 12200 50  0000 C CNN
	1    17350 12200
	1    0    0    -1  
$EndComp
$Comp
L R R87
U 1 1 509E37A5
P 17550 12200
F 0 "R87" V 17630 12200 50  0000 C CNN
F 1 "1R5" V 17550 12200 50  0000 C CNN
	1    17550 12200
	1    0    0    -1  
$EndComp
$Comp
L C C42
U 1 1 509E37A4
P 17350 13050
F 0 "C42" H 17400 13150 50  0000 L CNN
F 1 "10u" H 17400 12950 50  0000 L CNN
	1    17350 13050
	1    0    0    -1  
$EndComp
$Comp
L R R88
U 1 1 509E37A3
P 17750 12200
F 0 "R88" V 17830 12200 50  0000 C CNN
F 1 "1R5" V 17750 12200 50  0000 C CNN
	1    17750 12200
	1    0    0    -1  
$EndComp
$Comp
L NCP3063 U3
U 1 1 509E37A2
P 19100 12600
F 0 "U3" H 19000 12900 60  0000 C CNN
F 1 "NCP3063" H 19050 12300 60  0000 C CNN
	1    19100 12600
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR0133
U 1 1 509E37A1
P 16750 12250
F 0 "#PWR0133" H 16750 12200 20  0001 C CNN
F 1 "+24V" H 16750 12350 30  0000 C CNN
	1    16750 12250
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR0134
U 1 1 509E37A0
P 22250 12350
F 0 "#PWR0134" H 22250 12440 20  0001 C CNN
F 1 "+5V" H 22250 12440 30  0000 C CNN
	1    22250 12350
	1    0    0    -1  
$EndComp
$Comp
L C C46
U 1 1 509E379F
P 17350 13700
F 0 "C46" H 17400 13800 50  0000 L CNN
F 1 "10u" H 17400 13600 50  0000 L CNN
	1    17350 13700
	1    0    0    -1  
$EndComp
$Comp
L C C47
U 1 1 509E379E
P 17350 14350
F 0 "C47" H 17400 14450 50  0000 L CNN
F 1 "10u" H 17400 14250 50  0000 L CNN
	1    17350 14350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0135
U 1 1 509E3746
P 22500 4400
F 0 "#PWR0135" H 22500 4400 30  0001 C CNN
F 1 "GND" H 22500 4330 30  0001 C CNN
	1    22500 4400
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR0136
U 1 1 509E3737
P 22500 3500
F 0 "#PWR0136" H 22500 3600 30  0001 C CNN
F 1 "VDD" H 22500 3610 30  0000 C CNN
	1    22500 3500
	1    0    0    -1  
$EndComp
$Comp
L C C32
U 1 1 509E3729
P 22500 3950
F 0 "C32" H 22550 4050 50  0000 L CNN
F 1 "10u" H 22550 3850 50  0000 L CNN
	1    22500 3950
	1    0    0    -1  
$EndComp
NoConn ~ 19450 5500
NoConn ~ 19450 2500
$Comp
L GND #PWR0137
U 1 1 509E3711
P 19100 6000
F 0 "#PWR0137" H 19100 6000 30  0001 C CNN
F 1 "GND" H 19100 5930 30  0001 C CNN
	1    19100 6000
	1    0    0    -1  
$EndComp
Text Label 21250 5100 0    60   ~ 0
data-
Text Label 21250 4700 0    60   ~ 0
data+
$Comp
L VDD #PWR0138
U 1 1 509E36EE
P 22000 4100
F 0 "#PWR0138" H 22000 4200 30  0001 C CNN
F 1 "VDD" H 22000 4210 30  0000 C CNN
	1    22000 4100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0139
U 1 1 509E36ED
P 22000 5700
F 0 "#PWR0139" H 22000 5700 30  0001 C CNN
F 1 "GND" H 22000 5630 30  0001 C CNN
	1    22000 5700
	1    0    0    -1  
$EndComp
$Comp
L C C35
U 1 1 509E36EC
P 22000 4700
F 0 "C35" H 22050 4800 50  0000 L CNN
F 1 "100n" H 22050 4600 50  0000 L CNN
	1    22000 4700
	1    0    0    -1  
$EndComp
Text Label 18850 4300 0    60   ~ 0
enc-data
$Comp
L C C31
U 1 1 509E36D1
P 22000 2900
F 0 "C31" H 22050 3000 50  0000 L CNN
F 1 "100n" H 22050 2800 50  0000 L CNN
	1    22000 2900
	1    0    0    -1  
$EndComp
Text Label 18850 3700 0    60   ~ 0
enc-clock
$Comp
L VDD #PWR0140
U 1 1 509E36BB
P 19100 2000
F 0 "#PWR0140" H 19100 2100 30  0001 C CNN
F 1 "VDD" H 19100 2110 30  0000 C CNN
	1    19100 2000
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0141
U 1 1 509E3679
P 22000 3900
F 0 "#PWR0141" H 22000 3900 30  0001 C CNN
F 1 "GND" H 22000 3830 30  0001 C CNN
	1    22000 3900
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR0142
U 1 1 509E3668
P 22000 2300
F 0 "#PWR0142" H 22000 2400 30  0001 C CNN
F 1 "VDD" H 22000 2410 30  0000 C CNN
	1    22000 2300
	1    0    0    -1  
$EndComp
Text Label 21250 2900 0    60   ~ 0
clock+
Text Label 21250 3300 0    60   ~ 0
clock-
Text Notes 15200 900  0    60   ~ 0
Driver power socket (output)
Text Notes 13500 900  0    60   ~ 0
High power input
$Comp
L CONN_2 P6
U 1 1 509E35F7
P 16050 1450
F 0 "P6" V 16000 1450 40  0000 C CNN
F 1 "CONN_2" V 16100 1450 40  0000 C CNN
	1    16050 1450
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR0143
U 1 1 509E35F6
P 15300 1150
F 0 "#PWR0143" H 15300 1100 20  0001 C CNN
F 1 "+24V" H 15300 1250 30  0000 C CNN
	1    15300 1150
	-1   0    0    -1  
$EndComp
$Comp
L GND #PWR0144
U 1 1 509E35F5
P 15300 1750
F 0 "#PWR0144" H 15300 1750 30  0001 C CNN
F 1 "GND" H 15300 1680 30  0001 C CNN
	1    15300 1750
	-1   0    0    -1  
$EndComp
$Comp
L STM3485EBDR rs2
U 1 1 509E1075
P 20250 4900
F 0 "rs2" H 20250 4750 60  0000 C CNN
F 1 "STM3485EBDR" H 20250 5050 60  0000 C CNN
	1    20250 4900
	1    0    0    -1  
$EndComp
$Comp
L STM3485EBDR rs1
U 1 1 509E106E
P 20250 3100
F 0 "rs1" H 20250 2950 60  0000 C CNN
F 1 "STM3485EBDR" H 20250 3250 60  0000 C CNN
	1    20250 3100
	1    0    0    -1  
$EndComp
NoConn ~ 19900 1600
NoConn ~ 19900 1400
NoConn ~ 20700 1700
NoConn ~ 20700 1500
Text Label 20750 1800 0    60   ~ 0
data+
$Comp
L GND #PWR0145
U 1 1 509E0B63
P 21200 1700
F 0 "#PWR0145" H 21200 1700 30  0001 C CNN
F 1 "GND" H 21200 1630 30  0001 C CNN
	1    21200 1700
	1    0    0    -1  
$EndComp
Text Label 20750 1400 0    60   ~ 0
clock+
$Comp
L +5V #PWR0146
U 1 1 509E0B3C
P 19550 1800
F 0 "#PWR0146" H 19550 1890 20  0001 C CNN
F 1 "+5V" H 19550 1890 30  0000 C CNN
	1    19550 1800
	0    -1   -1   0   
$EndComp
Text Label 19600 1700 0    60   ~ 0
clock-
$Comp
L GND #PWR0147
U 1 1 509E0B23
P 19350 1600
F 0 "#PWR0147" H 19350 1600 30  0001 C CNN
F 1 "GND" H 19350 1530 30  0001 C CNN
	1    19350 1600
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR0148
U 1 1 509E0B0F
P 21000 1300
F 0 "#PWR0148" H 21000 1390 20  0001 C CNN
F 1 "+5V" H 21000 1390 30  0000 C CNN
	1    21000 1300
	0    1    1    0   
$EndComp
Text Label 19600 1300 0    60   ~ 0
data-
Text Notes 19700 1100 0    60   ~ 0
Encoder connection socket
$Comp
L CONN_6X2 P7
U 1 1 509DDF04
P 20300 1550
F 0 "P7" H 20300 1900 60  0000 C CNN
F 1 "CONN_6X2" V 20300 1550 60  0000 C CNN
	1    20300 1550
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0149
U 1 1 509DDED8
P 14800 1750
F 0 "#PWR0149" H 14800 1750 30  0001 C CNN
F 1 "GND" H 14800 1680 30  0001 C CNN
	1    14800 1750
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR0150
U 1 1 509DDED0
P 14800 1150
F 0 "#PWR0150" H 14800 1100 20  0001 C CNN
F 1 "+24V" H 14800 1250 30  0000 C CNN
	1    14800 1150
	1    0    0    -1  
$EndComp
$Comp
L CP1 C25
U 1 1 509DDEBC
P 14800 1450
F 0 "C25" H 14850 1550 50  0000 L CNN
F 1 "CP1" H 14850 1350 50  0000 L CNN
	1    14800 1450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0151
U 1 1 509DDE9A
P 14300 1750
F 0 "#PWR0151" H 14300 1750 30  0001 C CNN
F 1 "GND" H 14300 1680 30  0001 C CNN
	1    14300 1750
	1    0    0    -1  
$EndComp
$Comp
L +24V #PWR0152
U 1 1 509DDE8E
P 14300 1150
F 0 "#PWR0152" H 14300 1100 20  0001 C CNN
F 1 "+24V" H 14300 1250 30  0000 C CNN
	1    14300 1150
	1    0    0    -1  
$EndComp
$Comp
L CONN_2 P5
U 1 1 509DDE7A
P 13550 1450
F 0 "P5" V 13500 1450 40  0000 C CNN
F 1 "CONN_2" V 13600 1450 40  0000 C CNN
	1    13550 1450
	-1   0    0    -1  
$EndComp
Text Label 1700 14700 0    60   ~ 0
synch-ext
Text HLabel 1300 14700 0    60   Input ~ 0
synch-ext
Text HLabel 1300 14300 0    60   Input ~ 0
sda-ext
Text Label 1700 14300 0    60   ~ 0
sda-ext
Text Label 1700 13900 0    60   ~ 0
scl-ext
Text HLabel 1300 13900 0    60   Input ~ 0
scl-ext
$Comp
L GND #PWR0153
U 1 1 509DDD56
P 1700 13500
F 0 "#PWR0153" H 1700 13500 30  0001 C CNN
F 1 "GND" H 1700 13430 30  0001 C CNN
	1    1700 13500
	0    -1   -1   0   
$EndComp
Text HLabel 1300 13500 0    60   Input ~ 0
gnd
$Comp
L +24V #PWR0154
U 1 1 509DDC7D
P 1700 13100
F 0 "#PWR0154" H 1700 13050 20  0001 C CNN
F 1 "+24V" H 1700 13200 30  0000 C CNN
	1    1700 13100
	0    1    1    0   
$EndComp
Text HLabel 1300 13100 0    60   Input ~ 0
+24v
$Comp
L VDD #PWR0155
U 1 1 509DDC59
P 1700 12300
F 0 "#PWR0155" H 1700 12400 30  0001 C CNN
F 1 "VDD" H 1700 12410 30  0000 C CNN
	1    1700 12300
	0    1    1    0   
$EndComp
Text HLabel 1300 12300 0    60   Input ~ 0
vdd
NoConn ~ 8250 7300
NoConn ~ 8250 7100
NoConn ~ 8250 6900
Text Label 2550 8100 0    60   ~ 0
fw-upgrade
$Comp
L GND #PWR0156
U 1 1 509DDC2F
P 2950 8850
F 0 "#PWR0156" H 2950 8850 30  0001 C CNN
F 1 "GND" H 2950 8780 30  0001 C CNN
	1    2950 8850
	1    0    0    -1  
$EndComp
$Comp
L R R75
U 1 1 509DDC2E
P 2950 8450
F 0 "R75" V 3030 8450 50  0000 C CNN
F 1 "10k" V 2950 8450 50  0000 C CNN
	1    2950 8450
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0157
U 1 1 509DDC2D
P 3150 9350
F 0 "#PWR0157" H 3150 9350 30  0001 C CNN
F 1 "GND" H 3150 9280 30  0001 C CNN
	1    3150 9350
	1    0    0    -1  
$EndComp
$Comp
L R R78
U 1 1 509DDC2C
P 3150 8950
F 0 "R78" V 3230 8950 50  0000 C CNN
F 1 "10k" V 3150 8950 50  0000 C CNN
	1    3150 8950
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0158
U 1 1 509DDC2B
P 8350 2500
F 0 "#PWR0158" H 8350 2500 30  0001 C CNN
F 1 "GND" H 8350 2430 30  0001 C CNN
	1    8350 2500
	1    0    0    -1  
$EndComp
$Comp
L C C28
U 1 1 509DDC2A
P 8350 2000
F 0 "C28" H 8400 2100 50  0000 L CNN
F 1 "100n" H 8400 1900 50  0000 L CNN
	1    8350 2000
	1    0    0    -1  
$EndComp
$Comp
L C C27
U 1 1 509DDC29
P 7950 2000
F 0 "C27" H 8000 2100 50  0000 L CNN
F 1 "100n" H 8000 1900 50  0000 L CNN
	1    7950 2000
	1    0    0    -1  
$EndComp
$Comp
L C C26
U 1 1 509DDC28
P 7550 2000
F 0 "C26" H 7600 2100 50  0000 L CNN
F 1 "100n" H 7600 1900 50  0000 L CNN
	1    7550 2000
	1    0    0    -1  
$EndComp
$Comp
L R R72
U 1 1 509DDC27
P 3250 5900
F 0 "R72" V 3330 5900 50  0000 C CNN
F 1 "50" V 3250 5900 50  0000 C CNN
	1    3250 5900
	0    -1   -1   0   
$EndComp
Text Label 9500 8400 0    60   ~ 0
synch-ext
Text Label 9000 9800 0    60   ~ 0
led2
Text Label 9000 10000 0    60   ~ 0
led1
Text Label 9500 8800 0    60   ~ 0
sda-ext
Text Label 9500 8600 0    60   ~ 0
scl-ext
$Comp
L VDD #PWR0159
U 1 1 509DDC26
P 3450 3450
F 0 "#PWR0159" H 3450 3550 30  0001 C CNN
F 1 "VDD" H 3450 3560 30  0000 C CNN
	1    3450 3450
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR0160
U 1 1 509DDC25
P 4150 2100
F 0 "#PWR0160" H 4150 2200 30  0001 C CNN
F 1 "VDD" H 4150 2210 30  0000 C CNN
	1    4150 2100
	1    0    0    -1  
$EndComp
$Comp
L VDD #PWR0161
U 1 1 509DDC24
P 5650 1500
F 0 "#PWR0161" H 5650 1600 30  0001 C CNN
F 1 "VDD" H 5650 1610 30  0000 C CNN
	1    5650 1500
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR0162
U 1 1 509DDC23
P 2150 6050
F 0 "#PWR0162" H 2150 6050 30  0001 C CNN
F 1 "GND" H 2150 5980 30  0001 C CNN
	1    2150 6050
	1    0    0    -1  
$EndComp
$Comp
L CRYSTAL X2
U 1 1 509DDC22
P 2850 5550
F 0 "X2" H 2850 5700 60  0000 C CNN
F 1 "8MHz" H 2850 5400 60  0000 C CNN
	1    2850 5550
	0    -1   -1   0   
$EndComp
$Comp
L C C38
U 1 1 509DDC21
P 2450 5900
F 0 "C38" H 2500 6000 50  0000 L CNN
F 1 "18p" H 2500 5800 50  0000 L CNN
	1    2450 5900
	0    -1   -1   0   
$EndComp
$Comp
L C C37
U 1 1 509DDC20
P 2450 5200
F 0 "C37" H 2500 5300 50  0000 L CNN
F 1 "18p" H 2500 5100 50  0000 L CNN
	1    2450 5200
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR0163
U 1 1 509DDC1F
P 2600 4550
F 0 "#PWR0163" H 2600 4550 30  0001 C CNN
F 1 "GND" H 2600 4480 30  0001 C CNN
	1    2600 4550
	1    0    0    -1  
$EndComp
$Comp
L C C34
U 1 1 509DDC1E
P 3050 4400
F 0 "C34" H 3100 4500 50  0000 L CNN
F 1 "100n" H 3100 4300 50  0000 L CNN
	1    3050 4400
	0    -1   -1   0   
$EndComp
$Comp
L R R66
U 1 1 509DDC1D
P 3450 3950
F 0 "R66" V 3530 3950 50  0000 C CNN
F 1 "10k" V 3450 3950 50  0000 C CNN
	1    3450 3950
	1    0    0    -1  
$EndComp
Text Label 8600 6700 0    60   ~ 0
swd-clk
Text Label 8600 6500 0    60   ~ 0
swd-io
$Comp
L GND #PWR0164
U 1 1 509DDC1C
P 5950 11700
F 0 "#PWR0164" H 5950 11700 30  0001 C CNN
F 1 "GND" H 5950 11630 30  0001 C CNN
	1    5950 11700
	1    0    0    -1  
$EndComp
$Comp
L STM32F102C8T6 stm2
U 1 1 509DDC1B
P 5350 6300
F 0 "stm2" H 5350 6100 60  0000 C CNN
F 1 "STM32F102C8T6" H 5350 6500 60  0000 C CNN
	1    5350 6300
	1    0    0    -1  
$EndComp
$Comp
L C C29
U 1 1 509DDC1A
P 9500 2000
F 0 "C29" H 9550 2100 50  0000 L CNN
F 1 "10u" H 9550 1900 50  0000 L CNN
	1    9500 2000
	1    0    0    -1  
$EndComp
Text Label 8700 3700 0    60   ~ 0
dac-din
Text Label 8700 4300 0    60   ~ 0
dir-input
Text Label 8700 4500 0    60   ~ 0
en-input
Text Label 8700 3500 0    60   ~ 0
dac-sclk
$EndSCHEMATC
